<html><head><? $userfile = $HTTP_POST_FILES['userfile']['tmp_name'];$userfile_name = $HTTP_POST_FILES['userfile']['name'];$userfile_size = $HTTP_POST_FILES['userfile']['size'];$userfile_type = $HTTP_POST_FILES['userfile']['type'];?><title>Untitled Document</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head><body><?//$cid = $HTTP_POST_VARS['c_id'];//$ca = $HTTP_POST_VARS['cat'];//ensure that a file was uploaded - SMQ 8/20/2005if ($userfile=="none"){	echo "Problem: no file uploaded";	exit;}//ensure that the file uploaded has some content - SMQ 8/20/2005if ($userfile_size==0){	echo "Problem: uploaded file is zero length";	exit;}//ensure that the file is of the correct type - alternate is binary - SMQ 8/20/2005//if ($userfile_type != "text/plain")//{//echo "Problem: file is not plain text";//exit;//}//ensure that the file we are testing has been uploaded to the server and is not a local file - SMQ 8/20/2005if (!is_uploaded_file($userfile)){echo "Problem: possible file upload attack";exit;}//copy file from temporary server folder to permanent uploads dir. It is from here that we will further process the //file and create a database record ( or records ) of the questions. This directory is safely outside the document //tree - SMQ 8/20/2005.require_once('import/mysql_connect.php');	$sql = " SELECT * FROM course WHERE course_id = ".$cid;	$result1 = @mysql_query($sql);		if($result1) {		echo "Writing to Database... <br>";	}else{		die("Unable to continue - course does not exist in the database");	}	$meddir = mysql_result($result1, 0, "media_dir");$upfile = "/Library/WebServer/Documents/home/uploads/" .$userfile_name;$updir = "/Library/WebServer/Documents/flight/media/".$meddir;if ( !copy($userfile, $upfile)){echo "Problem: Could not move file into directory";  exit;}//download library from http://www.phpconcept.net/pclzip/index.en.php#downloadinclude('pclzip.lib.php');//zip file to extract$archive = new PclZip($upfile);//extract to a folder called newdirif ($archive->extract(PCLZIP_OPT_PATH, $updir) == 0) {//faileddie("Error : ".$archive->errorInfo(true));}echo "Successfully extracted files";?></body></html>