<?php//This page was created by SMQ to display graphical histograms of test statistics - SMQdefine('IN_somCBT', true);$phpEx = 'php';$somCBT_root_path = './../';include($somCBT_root_path . 'common.php');$cid =  ( isset($HTTP_GET_VARS['ARG1']) ) ? ($HTTP_GET_VARS['ARG1']) : ( ( isset($HTTP_POST_VARS['ARG1']) ) ? ($HTTP_POST_VARS['ARG1']) : 0) ;$qid =  ( isset($HTTP_GET_VARS['ARG2']) ) ? ($HTTP_GET_VARS['ARG2']) : ( ( isset($HTTP_POST_VARS['ARG2']) ) ? ($HTTP_POST_VARS['ARG2']) : 0) ;//// Start session management//$userdata = session_pagestart($user_ip, PAGE_QUIZ_REPORT);init_userprefs($userdata);//// End session managementif( $userdata['session_logged_in'] && ( ( $userdata['user_level'] == ADMIN) || ( $userdata['user_level'] == TEACHER) ) ) {	include($somCBT_root_path . 'includes/page_header.php');		$sql = " SELECT count(*) AS total_ques FROM ". QUIZ_QUESTIONS_TABLE ." where quiz_id = ". $qid;	$result = $db->sql_query($sql);	$ques = $db->sql_fetchrow($result);	$total_ques = $ques['total_ques'];	$sql = " SELECT * FROM ". QUIZ_QUESTIONS_TABLE ." where quiz_id = ". $qid;	$result = $db->sql_query($sql);	$total_pts = 0;	for ($i=0; $i<$total_ques; $i++) {		$pnts = $db->sql_fetchrow($result);		if($pnts['qtype']==2) {			$pnts_arr = explode("#", $pnts['points']);			$pnt_value = $pnts_arr[4];			$total_pts = $total_pts + $pnt_value;		}else{			$total_pts = $total_pts + 1;		}	}	$sql = " SELECT quiz_name, kuder FROM ". QUIZ_TABLE ." where quiz_id = ". $qid. " AND course_id =" .$cid;	$result = $db->sql_query($sql);	$test = $db->sql_fetchrow($result);		$sql = " SELECT MAX(grade) as high, MIN(grade) as low, AVG(grade) as ave, STD(grade) as st_dev, count(*) as total_stud  FROM ". QUIZ_ATTEMPTS_TABLE ." where quiz_id = ". $qid;	$result = $db->sql_query($sql);	$test_grade = $db->sql_fetchrow($result);	$scores = array();	$sql = " SELECT grade FROM ". QUIZ_ATTEMPTS_TABLE ." WHERE quiz_id = ". $qid;	$result1 = $db->sql_query($sql);	while($grde = $db->sql_fetchrow($result1)) {		$grd = $grde['grade'];		$gr = intval($grd);		$grdpc = $gr/$total_pts;		$grdpct = $grdpc*100;		array_push($scores, $grdpct);	}$clint = array(0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100);sort($scores);$scorecnt = count($scores);$scoretrack = $scorecnt-1;$clntcnt = count($clint);$clntrack = $clntcnt-1;$histo = array();for ($x=1; $x <= $clntcnt; $x++) {	$holder = 0;	$group = $clint[$x];	$preval = $group - 5.01;	for ($z=0; $z < $scorecnt; $z++) 	{ 		$grade = intval($scores[$z]);		if (($grade > $preval) && ($grade < $group)) 		{			$holder = $holder + 1;		}elseif($grade==100){			$holder = $holder + 1;		}	}	$histo[($x-1)] = $holder;}$spacers = max($histo);//print_r($scores);}else {	redirect(append_sid("login.php", true));}//// Generate the page//$template->pparse('overall_header');?><b><?php echo $test['quiz_name'];?></b><table border="0" cellpadding="0" cellspacing="0"><?php for($i=0;$i<(count($histo));$i++) { $grpnum = $histo[$i]; $blkspc = $spacers - $grpnum;?>  <td> <table border="0" cellpadding="0" cellspacing="0"><?php $x=0; while($x <= $blkspc) { ?>  <tr>    <td align="center" width="25" height="5"><img src="../templates/default/images/blank.gif"></td>  </tr><?php $x++; } ?><?php for($j=0;$j<$grpnum;$j++) {?><?php if($j==0) {?>  <tr>    <td align="center" width="25"><font size="-2"><?php echo $grpnum;?></font></td>  </tr><?php } ?>  <tr>    <td align="center" width="25" height="5"><img src="../templates/default/images/holder.gif"></td>  </tr><?php } ?>  <tr>    <td align="center" width="25" height="18"><font size="-1"><?php echo ($i*5);?>&nbsp;&nbsp;</font></td>  </tr></table></td><?php } ?><tr><td colspan="10" align="center"><b>Score %</b></td></tr></table><?phpinclude($somCBT_root_path . 'includes/page_tail.php');?>